!function(e){"use strict";function r(){function r(){s.map=L.map("map",{minZoom:2,scrollWheelZoom:!1}).setView([37.5333,-77.4667],2),m.push(L.tileLayer("http://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'})),m[m.length-1].addTo(s.map),s.on("showLayer",function(){}),s.layerMenu.on("orderChanged",function(e){n(),e.caller.order.forEach(function(e){c(e)})})}function o(e){var r=l.getLayerNode(e);s.utils.append(r,'<div id="floatingCirclesG" class="loading"><div class="f_circleG" id="frotateG_01"></div><div class="f_circleG" id="frotateG_02"></div><div class="f_circleG" id="frotateG_03"></div><div class="f_circleG" id="frotateG_04"></div><div class="f_circleG" id="frotateG_05"></div><div class="f_circleG" id="frotateG_06"></div><div class="f_circleG" id="frotateG_07"></div><div class="f_circleG" id="frotateG_08"></div></div>')}function t(e){var r=l.getLayerNode(e),o=r.querySelector(".loading");o&&o.parentNode.removeChild(o)}function n(){m.forEach(function(e){s.map.removeLayer(e)}),m=[]}function i(){var r=document.querySelector("#legend-layer-menu-min"),n=document.querySelector("#legend-layer-menu .close-button");l=new e.LegendLayerMenu("#legend-layer-menu"),s.layerMenu=l,l.on("layerAdded",function(e){var r=e.caller;o(r),s.showLayer(r,function(){t(r)})}),r.addEventListener("click",function(){l.rootNode.classList.contains("open")?l.rootNode.classList.remove("open"):l.rootNode.classList.add("open")},!1),n.addEventListener("click",function(){l.rootNode.classList.remove("open")},!1)}function a(e,r){"object"==typeof u[e.id]&&(s.map.removeLayer(u[e.id]),delete u[e.id]),u[e.id]=y[e.list](r,e),s.map.addLayer(u[e.id])}function c(r,o){return f[r.id]||"raster"===r.list?void a(r,f[r.id]):(new e.EcoengineClient).requestRecursive(r.uri,function(e){f[r.id]=e,a(r,e),s.fire("showLayer"),"function"==typeof o&&o()},function(e){a(r,e),s.fire("showLayerProgress")})}function d(e){s.map.removeLayer(u[e]),s.fire("showLayer",{layer:u[e]})}var l,s=this,u={},f={},y={pointlayer:function(e,r){var o=new L.HexbinLayer({radiusRange:[1,1],radius:1,opacity:1,colorRange:[r.color,r.color]}).addTo(s.map);return o.data(e.filter(function(e){return"object"==typeof e.geometry&&null!==e.geometry}).map(function(e){return e.geometry.coordinates})),o},hulllayer:e.hullLayer,hexlayer:function(e){var r=(new L.HexbinLayer).addTo(s.map);return r.data(e.filter(function(e){return"object"==typeof e.geometry&&null!==e.geometry}).map(function(e){return e.geometry.coordinates})),r},raster:function(e,r){return m.push(L.tileLayer(r.uri)),m[m.length-1].addTo(s.map),m[m.length-1]}},m=[];return s.utils=STPX.browsersugar.mix({}),s.showLayer=c,s.hideLayer=d,s.showMenuItemLoadState=o,s.hideMenuItemLoadState=t,i(),r(),s}new(STPX.samesies.extend(r))}(window.STMN);
//# sourceMappingURL=index.min.js.map