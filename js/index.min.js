!function(e){"use strict";function r(){function r(){y.map=L.map("map",{minZoom:2,scrollWheelZoom:!1}).setView([37.5333,-77.4667],2),new L.Hash(y.map),h.push(L.tileLayer("http://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'})),h[h.length-1].addTo(y.map),y.layerMenu.on("orderChanged",function(e){n(),e.caller.order.forEach(function(e){s(e)})}),y.layerMenu.on("color-change",function(e){("pointlayer"===e.caller.list||"hexlayer"===e.caller.list)&&(p[e.caller.id].colorScale().range([e.caller.color,e.caller.color]),p[e.caller.id]._redraw()),"hulllayer"===e.caller.list&&p[e.caller.id]._featureGroup.getLayers().forEach(function(r){var t;r._icon&&(t=r._icon.querySelector(".innerMarker"),t&&(t.style.backgroundColor=e.caller.color)),r._group&&r._group.getLayers().forEach(function(r){r._path&&r.setStyle({color:e.caller.color})})})}),document.querySelector("#hexagon-radius").addEventListener("change",function(e){y.map.eachLayer(function(r){if(r.options.__sHexLayer===!0){r.options.radius=+e.target.value,r.options.radiusRange=[1,+e.target.value];var t=r._data;r.initialize(r.options),r.data(t)}})})}function t(e){var r=d.getLayerNode(e);r.classList.add("progress"),y.utils.append(r,'<div id="floatingCirclesG" class="loading"><div class="f_circleG" id="frotateG_01"></div><div class="f_circleG" id="frotateG_02"></div><div class="f_circleG" id="frotateG_03"></div><div class="f_circleG" id="frotateG_04"></div><div class="f_circleG" id="frotateG_05"></div><div class="f_circleG" id="frotateG_06"></div><div class="f_circleG" id="frotateG_07"></div><div class="f_circleG" id="frotateG_08"></div></div>')}function o(e){var r=d.getLayerNode(e),t=r.querySelector(".loading");r.classList.remove("progress"),t&&t.parentNode.removeChild(t)}function n(){y.map.eachLayer(function(e){y.map.removeLayer(e)}),h=[],p={}}function a(){var r,n=document.querySelector("#legend-layer-menu-min"),a=document.querySelector("#legend-layer-menu .close-button");try{r=JSON.parse(decodeURIComponent(LZString.decompressFromBase64(y.statefulQueryString.get("state"))))}catch(i){r=null}d=new e.LegendLayerMenu("#legend-layer-menu",{menuState:r}),y.layerMenu=d,r=d.getMenuState(),r&&r.forEach(function(e){t(e),y.showLayer(e,function(){o(e)})}),d.on("layerAdded",function(e){var r=e.caller,n=d.getMenuState();t(r),y.showLayer(r,function(){o(r)}),n=n.map(function(e){return delete e.id,delete e.element,e.uri=e.uri.replace(/%22/g,"'"),e}),y.statefulQueryString.set("state",encodeURIComponent(LZString.compressToBase64(JSON.stringify(n))))}),n.addEventListener("click",function(){d.rootNode.classList.contains("open")?d.rootNode.classList.remove("open"):d.rootNode.classList.add("open")},!1),a.addEventListener("click",function(){d.rootNode.classList.remove("open")},!1)}function i(){y.statefulQueryString=new e.StatefulQueryString}function c(){f=d.rootNode.querySelector(".ecoengine-compare .share-button"),f&&f.addEventListener("click",function(){var e=new XMLHttpRequest;e.open("POST","https://www.googleapis.com/urlshortener/v1/url",!0),e.setRequestHeader("Content-type","application/json"),e.onreadystatechange=function(){4==e.readyState&&200==e.status?(swal({title:"Here is your share link",text:JSON.parse(e.responseText).id,confirmButtonText:"All done",confirmButtonColor:"rgb(103,171,236)",closeOnConfirm:!0,customClass:"modal-share"}),setTimeout(function(){var e=document.querySelector(".sweet-alert");e&&e.removeAttribute("tabIndex")},100)):swal("Uh oh","We were not able to create a short URL. Please check your connection and try again in a few minutes.","error")},e.send('{"longUrl": "'+location.href+'"}')},!1)}function l(e,r){"object"==typeof p[e.id]&&"raster"!==e.list&&(y.map.removeLayer(p[e.id]),delete p[e.id]),p[e.id]=g[e.list](r,e),y.map.addLayer(p[e.id])}function s(r,t){return m[r.id]||"raster"===r.list?void l(r,m[r.id]):(new e.EcoengineClient).requestRecursive(r.uri.replace(/'/g,'"'),function(e){m[r.id]=e,l(r,e),y.fire("showLayer"),"function"==typeof t&&t()},function(e){l(r,e),y.fire("showLayerProgress")})}function u(e){y.map.removeLayer(p[e]),y.fire("showLayer",{layer:p[e]})}var d,f,y=this,p={},m={},g={pointlayer:function(e,r){var t=new L.HexbinLayer({radiusRange:[1,1],radius:1,opacity:1,colorRange:[r.color,r.color]}).addTo(y.map);return t.data(e.filter(function(e){return"object"==typeof e.geometry&&null!==e.geometry}).map(function(e){return e.geometry.coordinates})),t},hulllayer:function(e,r){var t=new L.MarkerClusterGroup({polygonOptions:{color:r.color,stroke:!1,opacity:.7}});return e.forEach(function(e){e.geometry&&t.addLayer(L.marker([e.geometry.coordinates[1],e.geometry.coordinates[0]],{icon:L.divIcon({className:"point-feature-icon point-feature-icon-"+r.color})}))}),t},hexlayer:function(e,r){var t=new L.HexbinLayer({radiusRange:[1,document.querySelector("#hexagon-radius").value],radius:document.querySelector("#hexagon-radius").value,opacity:1,colorRange:[r.color,r.color]}).addTo(y.map);return t.hexMouseOver(function(){}),t.hexMouseOut(function(){}),t.hexClick(function(e){var r=e.map(function(e){var r=e.d.properties;return r.long=e.d.geometry.coordinates[0],r.lat=e.d.geometry.coordinates[1],r}),t=window.open("","wnd");t.document.body.innerHTML="<pre>"+d3.csv.format(r)+"</pre>"}),t.data(e.filter(function(e){return"object"==typeof e.geometry&&null!==e.geometry}).map(function(e){return e[0]=e.geometry.coordinates[0],e[1]=e.geometry.coordinates[1],e})),t.options.__sHexLayer=!0,t},raster:function(e,r){return h.push(L.tileLayer(r.uri,{transparent:!0,unloadInvisibleTiles:!0})),h[h.length-1].addTo(y.map),h[h.length-1]}},h=[];return y.utils=STPX.browsersugar.mix({}),y.showLayer=s,y.hideLayer=u,y.showMenuItemLoadState=t,y.hideMenuItemLoadState=o,i(),a(),r(),c(),y}new(STPX.samesies.extend(r))}(window.STMN);
//# sourceMappingURL=index.min.js.map